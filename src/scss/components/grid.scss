:root {
  --grid-padding: 0;
  --grid-areas: "header" "content";
  /* Базовый шаблон по умолчанию */
  --grid-bar-size: 0px;
  --grid-sidebar-size: 0px;
  --grid-content-size: 0px;
  --grid-column-gap: 0px;
  --grid-columns-template: 100%;
  --grid-bar-margin: 0;
  --grid-bar-display: block;
}

.main-grid {
  display: grid;
  margin: 0 auto;
  padding-inline: var(--grid-padding);
  inline-size: 100%;
  max-inline-size: var(--max-size-grid);
  min-inline-size: var(--min-size-grid);
  grid-template-columns: var(--grid-columns-template);
  column-gap: var(--grid-column-gap);
  grid-template-areas: var(--grid-areas);
  &__header {
    grid-area: header;
  }
  &__content {
    grid-area: content;
  }
  &__bar {
    display: var(--grid-bar-display);
    grid-area: bar;
    margin: var(--grid-bar-margin);
  }
  &__sidebar {
    grid-area: sidebar;
  }
  &:has(&__bar) {
    --grid-areas: "header" "bar" "content";
  }
  // Если есть sidbar, bar не показываем
  &:has(&__sidebar) {
    --grid-bar-display: none;
    --grid-areas: "header" "sidebar" "content";
  }
  &:has(&__sidebar).bar-left {
    --grid-areas: "header" "sidebar" "content";
  }
}

@media (width >=1100px) {
  :root {
    --grid-padding: var(--g-8);
    --grid-column-gap: var(--g-4);
  }
  .main-grid {
    // Бар для всей страницы
    &:has(&__sidebar) {
      --grid-bar-display: none;
      --grid-sidebar-size: minmax(200px, 300px);
      --grid-content-size: minmax(814px, 1fr);
      --grid-columns-template: var(--grid-content-size) var(--grid-sidebar-size);
      --grid-areas: "header sidebar" "content sidebar";
    }
    &:has(&__sidebar).bar-left {
      --grid-columns-template: var(--grid-sidebar-size) var(--grid-content-size);
      --grid-areas: "sidebar header" "sidebar content";
    }
  }
}

@media (width >=1366px) {
  :root {
    --grid-padding: var(--g-8);
    --grid-bar-size: calc(400px + var(--grid-column-gap));
    --grid-content-size: minmax(0, 1fr);
    --grid-column-gap: var(--g-4);
  }
  .main-grid {
    // Бар для формы, столбец напротив контента
    &:has(&__bar) {
      --grid-columns-template: var(--grid-content-size) var(--grid-bar-size);
      --grid-areas: "header header" "content bar";
      --grid-bar-margin: 0 var(--g-4) 0 0;
    }
    /* Если есть бар И у .main-grid есть класс .left, меняем шаблон (бар слева) */
    &:has(&__bar).bar-left {
      --grid-columns-template: var(--grid-bar-size) var(--grid-content-size);
      --grid-areas: "header header" "bar content";
      --grid-bar-margin: 0 0 0 var(--g-4);
    }
    // Бар для всей страницы
    &:has(&__sidebar) {
      --grid-sidebar-size: 300px;
      --grid-content-size: minmax(700px, calc(750px + var(--grid-column-gap)));
      --grid-columns-template: var(--grid-content-size) var(--grid-sidebar-size);
      --grid-areas: "header sidebar" "content sidebar";
    }
    &:has(&__sidebar).bar-left {
      --grid-columns-template: var(--grid-sidebar-size) var(--grid-content-size);
      --grid-areas: "sidebar header" "sidebar content";
    }
  }
}
