(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const n of l.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function e(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerPolicy&&(l.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?l.credentials="include":t.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(t){if(t.ep)return;t.ep=!0;const l=e(t);fetch(t.href,l)}})();function y(o){document.documentElement.className="",document.documentElement.classList.add(`theme-${o}`),localStorage.setItem("theme",o)}(function(){const r=localStorage.getItem("theme");r&&y(r)})();document.addEventListener("DOMContentLoaded",()=>{const o=document.documentElement,r=document.querySelectorAll(".theme-menu__button");function e(s){r.forEach(t=>{t.getAttribute("data-theme")===s?t.setAttribute("disabled",!0):t.removeAttribute("disabled")})}[...o.classList].includes("theme-light")?e("light"):[...o.classList].includes("theme-dark")||window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches&&e("light"),r.forEach(s=>{s.onclick=()=>{y(s.getAttribute("data-theme")),e(s.getAttribute("data-theme"))}})});function E(o){const r=o.currentTarget;Math.abs(o.deltaY)>Math.abs(o.deltaX)&&(o.preventDefault(),r.scrollLeft+=o.deltaY*1)}const _=document.querySelectorAll(".scrolling");_.forEach(o=>{o.addEventListener("wheel",E,{passive:!1})});document.addEventListener("DOMContentLoaded",()=>{console.log("Инициализация скроллера с кнопками"),document.querySelectorAll(".scrolling-slider").forEach(r=>{const e=r.querySelector(".products-grid__list");if(!e)return;e.classList.add("scrolling");let s=r.querySelector(".products-grid__arrow--left"),t=r.querySelector(".products-grid__arrow--right");s||(s=document.createElement("button"),s.type="button",s.className="products-grid__arrow products-grid__arrow--left",s.setAttribute("aria-label","Прокрутить влево"),r.prepend(s)),t||(t=document.createElement("button"),t.type="button",t.className="products-grid__arrow products-grid__arrow--right",t.setAttribute("aria-label","Прокрутить вправо"),r.append(t));const l=()=>{e.scrollWidth>e.clientWidth?(r.classList.add("show-arrows"),e.scrollLeft>0?r.classList.add("show-left-arrow"):r.classList.remove("show-left-arrow"),e.scrollLeft+e.clientWidth+1<e.scrollWidth?r.classList.add("show-right-arrow"):r.classList.remove("show-right-arrow")):r.classList.remove("show-arrows","show-left-arrow","show-right-arrow")};l();const n=new ResizeObserver(l);n.observe(r),n.observe(e),e.addEventListener("scroll",l);const p=c=>{const a=e.querySelectorAll(".products-grid__card");if(a.length===0)return;const b=e.clientWidth,u=e.scrollLeft;let h=-1,L=-1;for(let i=0;i<a.length;i++){const f=a[i].getBoundingClientRect(),g=e.getBoundingClientRect(),w=f.left-g.left+u,v=w+f.width;w<u+b&&v>u&&(h===-1&&(h=i),L=i)}h===-1&&(h=0,L=0);let m;if(c==="right"){const i=Math.min(L+1,a.length-1),d=a[i];if(d){const f=d.getBoundingClientRect(),g=e.getBoundingClientRect();m=f.left-g.left+u}else m=e.scrollWidth-b}else{const i=Math.max(h-1,0),d=a[i];if(d){const f=d.getBoundingClientRect(),g=e.getBoundingClientRect();m=f.left-g.left+u}else m=0}e.scrollTo({left:m,behavior:"smooth"}),setTimeout(l,300)};s.addEventListener("click",c=>{c.preventDefault(),p("left")}),t.addEventListener("click",c=>{c.preventDefault(),p("right")}),r.addEventListener("keydown",c=>{c.key==="ArrowLeft"?(c.preventDefault(),p("left")):c.key==="ArrowRight"&&(c.preventDefault(),p("right"))})})});
