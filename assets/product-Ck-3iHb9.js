import"./index-4YiF9bg1.js";document.addEventListener("DOMContentLoaded",()=>{const p=(n,l)=>{const r="order-form__modal";let t=document.getElementById("attr-modal"),o=null,e=null,c=null,s=null,a=n;if(t)o=t.querySelector(`.${r}-content`),e=o.querySelector("h2"),c=o.querySelector(".order-form__modal-list"),s=o.querySelector(`.${r}-close`);else{t=document.createElement("div"),t.id="attr-modal",t.className=r,o=document.createElement("div"),o.className=`${r}-content`,e=document.createElement("h2"),e.className=`${r}-title`,c=document.createElement("div"),c.className=`${r}-list`,s=document.createElement("button"),s.type="button",s.className=`${r}-close`,s.setAttribute("aria-label","Закрыть"),s.innerHTML="&times;",o.appendChild(e),o.appendChild(s),o.appendChild(c),t.appendChild(o),document.body.appendChild(t);const i=()=>{y(a,c),t.classList.remove("show"),t.classList.add("hide"),setTimeout(()=>{t.remove(),document.removeEventListener("keydown",t.handleEscKey)},400)};s.addEventListener("click",()=>i()),t.addEventListener("click",m=>{m.target===t&&i()});const f=m=>{m.key==="Escape"&&t.classList.contains("show")&&i()};document.addEventListener("keydown",f),t.handleEscKey=f}const d=n.cloneNode(!0);d.querySelectorAll(".more-button").forEach(i=>i.remove()),c.innerHTML="",c.appendChild(d),t.currentOriginalList=a,e.textContent=l||"Выберите опцию",t.classList.add("show")},y=(n,l)=>{const r=l.querySelector(".order-form__attr-list")||l;if(!n||!r){console.warn("Один из списков для синхронизации не найден");return}const t=n.querySelectorAll('input[type="checkbox"], input[type="radio"], select, button.attr-button'),o=r.querySelectorAll('input[type="checkbox"], input[type="radio"], select, button.attr-button');t.forEach((e,c)=>{const s=o[c];if(!s){console.warn(`Элемент управления в модальном окне не найден для индекса ${c}`);return}if((e.type==="checkbox"||e.type==="radio")&&(e.checked=s.checked,e.type==="radio")){const a=e.closest(".attr-button"),d=s.closest(".attr-button");a&&d&&(d.classList.contains("active")?a.classList.add("active"):a.classList.remove("active"))}e.classList&&e.classList.contains("attr-button")&&(e.className=s.className),e.tagName==="SELECT"&&(e.value=s.value)}),n.dispatchEvent(new Event("change",{bubbles:!0}))},u=()=>{const n=document.querySelector(".order-form");if(!n){console.warn("Элемент .order-form не найден на странице");return}n.querySelectorAll(".order-form__attr-list").forEach((r,t)=>{const o=r.closest(".order-form__attr");if(!o){console.warn(`Родительский элемент .order-form__attr не найден для списка ${t}`);return}if(r.scrollWidth>r.clientWidth){o.classList.add("overflow");let e=o.querySelector(".more-button");e||(e=document.createElement("button"),e.type="button",e.className="more-button",e.textContent="...",e.setAttribute("aria-label","Показать весь список"),e.id=`${t}-more-button`,o.appendChild(e))}else{o.classList.remove("overflow");const e=o.querySelector(".more-button");e&&e.remove()}})};u(),window.addEventListener("resize",u),document.addEventListener("click",n=>{if(n.target&&n.target.matches(".more-button")){n.preventDefault();const l=n.target.closest(".order-form__attr");if(!l){console.error("Кнопка .more-button не находится внутри .order-form__attr");return}const r=l.querySelector(":scope > .order-form__attr-list");if(!r){console.error("Список .order-form__attr-list не найден внутри .order-form__attr");return}const t=l.querySelector(".order-form__attr-title"),o=t?t.textContent.trim():"";p(r,o)}})});
